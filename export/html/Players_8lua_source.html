<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FrameworkZ: Players.lua Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="fz-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">FrameworkZ<span id="projectnumber">&#160;4.4.2</span>
   </div>
   <div id="projectbrief">Provides a framework for Project Zomboid with various systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('Players_8lua_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Players.lua</div></div>
</div><!--header-->
<div class="contents">
<a href="Players_8lua.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span>--! \page global_variables Global Variables</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span>--! \section Players Players</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span>--! <a class="code hl_class" href="structFrameworkZ.html">FrameworkZ</a>.Players\n</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span>--! See Players <span class="keywordflow">for</span> the <span class="keyword">module</span> on players.\n\n</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span>--! FrameworkZ.Players.List\n</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span>--! A list of all instanced players in the game.</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>local getPlayer = getPlayer</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>local isClient = isClient</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>FrameworkZ = FrameworkZ or {}</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="foldopen" id="foldopen00013" data-start="{" data-end="};">
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno"><a class="line" href="structPLAYER.html">   13</a></span>--! \brief Players module for FrameworkZ. Defines and interacts with PLAYER object.</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>--! \class FrameworkZ.Players</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="structPLAYER.html#a4ede2ac2ff4a70420da46932ea34ae62">   15</a></span>FrameworkZ.Players = {}</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>--! \brief List of all instanced players in the game.</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>FrameworkZ.Players.List = {}</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="structPLAYER.html#adb708be7b43b8a916178de71bb61e0a4">   19</a></span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>--! \brief Roles for players in FrameworkZ.</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>FrameworkZ.Players.Roles = {</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    User = &quot;User&quot;,</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    Operator = &quot;Operator&quot;,</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    Moderator = &quot;Moderator&quot;,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno"><a class="line" href="structPLAYER.html#a3a6a636a703dcd9bfec208bb0a31ef82">   25</a></span>    Admin = &quot;Admin&quot;,</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    Super_Admin = &quot;Super Admin&quot;,</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    Owner = &quot;Owner&quot;</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>}</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="structPLAYER.html#a6f850a0a06f5333ea273d507c7ca6a66">   29</a></span>FrameworkZ.Players = FrameworkZ.Foundation:NewModule(FrameworkZ.Players, &quot;Players&quot;)</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="structPLAYER.html#a26629e72d131457d966ea74dc18225f0">   31</a></span>--! \class PLAYER</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>--! \brief Player class for FrameworkZ.</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="structPLAYER.html#ae3b603fd5cc2cf0ab9236994b8d0288c">   33</a></span>local PLAYER = {}</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>PLAYER.__index = PLAYER</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>--! \brief Initializes the player object.</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="structPLAYER.html#ab164002c581e4ce52fae5992f4512a61">   37</a></span>--! \return \string The username of the player.</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>function PLAYER:Initialize()</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="structPLAYER.html#a456434651d03493f358d7d7b4ea59477">   39</a></span>    if not self.isoPlayer then return end</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="structPLAYER.html#ae36c340c2b2e8696679e0601c1ea85ed">   41</a></span>    local firstConnection = false</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    local characterModData = self.isoPlayer:getModData()[&quot;FZ_PLY&quot;] or nil</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="structPLAYER.html#aeb190b74be7183423f2790ffb761d73b">   43</a></span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    if not characterModData then</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        firstConnection = true</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        self:InitializeDefaultFactionWhitelists()</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="structPLAYER.html#a83f58e83d6d53b741015e170ce0773d5">   48</a></span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        self.isoPlayer:getModData()[&quot;FZ_PLY&quot;] = {</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>            username = self.username,</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>            steamID = self.steamID,</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="structPLAYER.html#a3ab7fbb543f48e64645c5e07d4e7398f">   52</a></span>            role = self.role,</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>            maxCharacters = self.maxCharacters,</div>
</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>            previousCharacter = self.previousCharacter,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>            whitelists = self.whitelists,</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>            characters = self.characters</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        }</div>
<div class="foldopen" id="foldopen00058" data-start="{" data-end="};">
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html">   58</a></span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        if isClient() then</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>            self.isoPlayer:transmitModData()</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        end</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    end</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#aa6ce3416c94ace8f6fb5c9fe756445a2">   63</a></span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    self:ValidatePlayerData()</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    --[[if isClient() then</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        FrameworkZ.Timers:Simple(5, function()</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a62818e2fe470fb48f99162aa94e1e40a">   68</a></span>            sendClientCommand(&quot;FZ_PLY&quot;, &quot;initialize&quot;, {self.isoPlayer:getUsername()})</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        end)</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a90367208d82404c579bddcfc6360aa64">   70</a></span>    end--]]</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#aee8323e0f130da720c1d9ffed7d7f717">   72</a></span>    return FrameworkZ.Players:Initialize(self.username, self)</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>end</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#abee4a02249dfe4c0808b7723f26ddaab">   74</a></span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>--! \brief Saves the player&#39;s data.</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#afc271306674711322220a805828bf905">   76</a></span>--! \param shouldTransmit \boolean (Optional) Whether or not to transmit the player&#39;s data to the server.</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>--! \return \boolean Whether or not the player was successfully saved.</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a26cd4fcde3d96490436703f7ebd49dcf">   78</a></span>--! \todo Test if localized variable (playerData) maintains referential integrity for transmitModData() to work on it.</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>function PLAYER:Save(shouldTransmit)</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#af0cfec12bccdc294888eb542a35816d1">   80</a></span>    if shouldTransmit == nil then shouldTransmit = true end</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#ae905f82e2f2f25dcf0b9051e01dc101c">   82</a></span>    if not self.isoPlayer then return false end</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a6809ff08d5d546e942ef5e18e085155a">   84</a></span>    local playerData = self:GetStoredData()</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a6ce67161f8d285f33a9df986dd8cf030">   86</a></span>    if not playerData then return false end</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#acf8c519811421d4d8d5143355d8fbd02">   88</a></span>    playerData.role = self.role</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    playerData.maxCharacters = self.maxCharacters</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a6fd458f0bdd7d0ffaf5fbd112b76e1bb">   90</a></span>    playerData.previousCharacter = self.previousCharacter</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    playerData.whitelists = self.whitelists</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    playerData.characters = self.characters</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    if shouldTransmit then</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        self.isoPlayer:transmitModData()</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a1f46bc63e24a669ef71c4e2f5f6c5ff9">   96</a></span>    end</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a4e2b9158c8d5e6a0b4ff6a7557d941d3">   98</a></span>    return true</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>end</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a247865dd8151ba36de2de317069c20a3">  100</a></span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>--! \brief Destroys the player object.</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>--! \return \mixed of \boolean Whether or not the player was successfully destroyed and \string The message on success or failure.</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>function PLAYER:Destroy()</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    if not self.isoPlayer then return false, &quot;Critical save fail: Iso Player is nil.&quot; end</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    local username = self.isoPlayer:getUsername()</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#ade115d43fe83b832e61a552183488246">  107</a></span>    local success1, success2, message</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a9d8370a2d71d4c920718f49268417b08">  109</a></span>    if FrameworkZ.Players.List[username] then</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        success1, message = FrameworkZ.Players:Save(username)</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a5f74248999c7a636d3261038f75d4fc2">  111</a></span>    end</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a4f8bca72b6a35488db8d8e9dab07aa76">  113</a></span>    if FrameworkZ.Characters.List[username] then</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        FrameworkZ.Characters.List[username] = nil</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a330459423400d92262339d31eab76912">  115</a></span>    end</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a25d7245e4755bf7cf98dfc2b1bc57cce">  117</a></span>    if FrameworkZ.Players.List[username] then</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        FrameworkZ.Players.List[username] = nil</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a1edfdfca8a176c0e4ce05b8a06671636">  119</a></span>    end</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#ad84687a13d2fad8c4600992abfb4464b">  121</a></span>    if success1 and success2 then</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        return true, message</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#aa16b8c4bc91b6369d74d738d215e4283">  123</a></span>    end</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="structFrameworkZ_1_1Players.html#a580777bad44688b4f430aeac9267e8c6">  125</a></span>    return false, message</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>end</div>
</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="Players_8lua.html#a4e6b906134a99597f8990ec4f4493a7a">  128</a></span>function PLAYER:InitializeDefaultFactionWhitelists()</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    local factions = FrameworkZ.Factions.List</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="Players_8lua.html#a61f337d4777878cf50bea6b1a529512b">  130</a></span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    for k, v in pairs(factions) do</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="Players_8lua.html#afa527a043ae080282ba8416ad32d073d">  132</a></span>        if v.isWhitelistedByDefault then</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>            self.whitelists[v.id] = true</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="Players_8lua.html#ab66f984df4af3ac3abbb26e38febb6e6">  134</a></span>        end</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    end</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>end</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="Players_8lua.html#ace3597a98f56ec4ea5222579eabdc5a2">  138</a></span>function PLAYER:ValidatePlayerData()</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    local characterModData = self.isoPlayer:getModData()[&quot;FZ_PLY&quot;]</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="Players_8lua.html#ae29ffdf10085b236b825c1e646bde8cb">  140</a></span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    if not characterModData then return false end</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    local initializedNewData = false</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="Players_8lua.html#ae44bdfb3b3bd8461d64a0ed165441be4">  144</a></span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    if not characterModData.username then</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        initializedNewData = true</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        characterModData.username = self.username or getPlayer():getUsername()</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="Players_8lua.html#afa547b3eeff244fc18321d7e8709b3c8">  148</a></span>    end</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    if not characterModData.steamID then</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        initializedNewData = true</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="Players_8lua.html#ad362c2add82b2e3e1917cff5e180a007">  152</a></span>        characterModData.steamID = self.steamID or getPlayer():getSteamID()</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    end</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    if not characterModData.role then</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="Players_8lua.html#a268185f336712531c5b0b1dc0ad8ea48">  156</a></span>        initializedNewData = true</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        characterModData.role = self.role or FrameworkZ.Players.Roles.User</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    end</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="Players_8lua.html#a76fb516f5f7080b040f68c8f30a761e8">  160</a></span>    if not characterModData.maxCharacters then</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        initializedNewData = true</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="Players_8lua.html#a55437a84141ed35fd5bf5699e26ff643">  162</a></span>        characterModData.maxCharacters = self.maxCharacters or FrameworkZ.Config.DefaultMaxCharacters</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    end</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    if not characterModData.previousCharacter then</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        initializedNewData = true</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        characterModData.previousCharacter = self.previousCharacter or nil</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    end</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    if not characterModData.whitelists then</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        self:InitializeDefaultFactionWhitelists()</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        initializedNewData = true</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        characterModData.whitelists = self.whitelists</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    end</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="Players_8lua.html#a1f76fd99cafe6abeec9923bc534366ba">  176</a></span>    if not characterModData.characters then</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        initializedNewData = true</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="Players_8lua.html#acc7f1bf7fac7bbd0d2fc3f0c039e02bc">  178</a></span>        characterModData.characters = self.characters or {}</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    end</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="Players_8lua.html#ae051a2d99484f13c481e8f7e5e3602ca">  180</a></span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    if isClient() then</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        self.isoPlayer:transmitModData()</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    end</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    self.username = characterModData.username</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    self.steamID = characterModData.steamID</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    self.role = characterModData.role</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno"><a class="line" href="Players_8lua.html#a0e9e20679ed7dee87de48cb546317741">  188</a></span>    self.maxCharacters = characterModData.maxCharacters</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    self.previousCharacter = characterModData.previousCharacter</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="Players_8lua.html#a761b9d58ac99d410d9413a9f349a343f">  190</a></span>    self.whitelists = characterModData.whitelists</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    self.characters = characterModData.characters</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="Players_8lua.html#aeb26da00a1a543ecc9b0a46ff4a90607">  192</a></span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    return initializedNewData</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno"><a class="line" href="Players_8lua.html#a690a98e988401dcdfa8c132b553db52a">  194</a></span>end</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="Players_8lua.html#a000302eb7ea8c07271dcdd8a00e11def">  196</a></span>--! \brief Gets the stored player mod data table. Used internally. Do not use this unless you know what you are doing. Updating data on the mod data will cause inconsistencies between the mod data and the FrameworkZ player object.</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>--! \return \table The stored player mod data table.</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="Players_8lua.html#a4946f639f095dd20fc4ed1ebf9a5f966">  198</a></span>function PLAYER:GetStoredData()</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    return self.isoPlayer:getModData()[&quot;FZ_PLY&quot;]</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno"><a class="line" href="Players_8lua.html#ac5a34c51eab0b828588984f6289c5d36">  200</a></span>end</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="Players_8lua.html#a143d95e9ef14088e1b321a9da43dea91">  202</a></span>function PLAYER:GetWhitelists()</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    return self.whitelists</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="Players_8lua.html#a9c15c1ce49232ff4adde69ee768ebde5">  204</a></span>end</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno"><a class="line" href="Players_8lua.html#a0564bbf2dc81f826c77ff774e06d42f8">  206</a></span>function PLAYER:SetWhitelisted(factionID, whitelisted)</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    if not factionID then return false end</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="Players_8lua.html#a2de35cf0a0c1cb23dbb343f500e6483c">  208</a></span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    self.whitelists[factionID] = whitelisted</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="Players_8lua.html#ad3191de97e130f1b0f2225ce5b08e9da">  210</a></span>    self:GetStoredData().whitelists[factionID] = whitelisted</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="Players_8lua.html#a4662a0995b439ddd86b3ea7d417e54ca">  212</a></span>    return true</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>end</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="Players_8lua.html#ae4a330e4eab019f506b9268cb7409449">  214</a></span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>function PLAYER:IsWhitelisted(factionID)</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="Players_8lua.html#abe8721f04852d6f6865efc8af05157d7">  216</a></span>    if not factionID then return false end</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="Players_8lua.html#ac3e21a5bc651b95ddf997855e77785b8">  218</a></span>    return self.whitelists[factionID] or false</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>end</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="Players_8lua.html#a1f230f95afb8a4b5fd893e677d24ed88">  220</a></span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>--! \brief Plays a sound for the player that only they can hear.</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="Players_8lua.html#a494be6674b52d745cb08dd6ab6869e43">  222</a></span>--! \param soundName \string The name of the sound to play.</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>--! \return \integer The sound&#39;s ID.</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno"><a class="line" href="Players_8lua.html#a590336fdbed6391e5a1997573c03391f">  224</a></span>function PLAYER:PlayLocalSound(soundName)</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    return self.isoPlayer:getEmitter():playSoundImpl(soundName, nil)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno"><a class="line" href="Players_8lua.html#a59be69cb2a8f0efde1b61eac528da370">  226</a></span>end</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="Players_8lua.html#a5b40b73d2ca7bd2958850581bc1b127b">  228</a></span>--! \brief Stops a sound for the player.</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>--! \param soundNameOrID \mixed of \string or \integer The name or ID of the sound to stop.</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="Players_8lua.html#ab1793ecc1d0f27d39b3ee93c99d8b04a">  230</a></span>function PLAYER:StopSound(soundNameOrID)</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    if type(soundNameOrID) == &quot;number&quot; then</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="Players_8lua.html#a594c4d773cb8ccb59f58f68deddcac56">  232</a></span>        self.isoPlayer:getEmitter():stopSound(soundNameOrID)</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    elseif type(soundNameOrID) == &quot;string&quot; then</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="Players_8lua.html#a62c1993f75af701f5e8b2ad6a497a49b">  234</a></span>        self.isoPlayer:getEmitter():stopSoundByName(soundNameOrID)</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    end</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno"><a class="line" href="Players_8lua.html#aa302752906cd080692b8f42949feb80c">  236</a></span>end</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="Players_8lua.html#ad6c9b6d8f00ca698e96ab6a52b19672a">  238</a></span>function FrameworkZ.Players:New(isoPlayer)</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    if not isoPlayer then return false end</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="Players_8lua.html#a3b2952427fb661e30fb449f1d9f66050">  240</a></span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    local object = {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno"><a class="line" href="Players_8lua.html#a027f6aa1f3c5c83ed021dc69612cab97">  242</a></span>        username = isoPlayer:getUsername(),</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        isoPlayer = isoPlayer,</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="Players_8lua.html#aa2e4d9bd1e00d17759072ca32a2a4fbc">  244</a></span>        steamID = isoPlayer:getSteamID(),</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        role = FrameworkZ.Players.Roles.User,</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="Players_8lua.html#a656a7d0e1cce7a22e055af1cc781f1f0">  246</a></span>        loadedCharacter = nil,</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>        maxCharacters = FrameworkZ.Config.DefaultMaxCharacters,</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="Players_8lua.html#a5a02d1f9ef463a3e955f16d5ea9091c0">  248</a></span>        previousCharacter = nil,</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        whitelists = {},</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="Players_8lua.html#ae21ba74716b5963b20e0c9b03f987c97">  250</a></span>        characters = {}</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    }</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno"><a class="line" href="Players_8lua.html#a1f0cd8a97d5317a0cb9fb7abdb1315b5">  252</a></span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    setmetatable(object, PLAYER)</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno"><a class="line" href="Players_8lua.html#a64b851dc063971b75e8376ccdad4ff23">  254</a></span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    return object</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="Players_8lua.html#a569caa4b8db4ab89682bcc083244c01e">  256</a></span>end</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno"><a class="line" href="Players_8lua.html#aee2feef3a9bf39c271149d301c9bd2d9">  258</a></span>function FrameworkZ.Players:Initialize(username, player)</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    self.List[username] = player</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno"><a class="line" href="Players_8lua.html#a57f57c6afe52832e32953be262f94925">  260</a></span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    return username</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno"><a class="line" href="Players_8lua.html#a89a1f52faf68ff75352868e451e9e85a">  262</a></span>end</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="Players_8lua.html#a41c9bc142bb22f1d05f17826e46cfacf">  264</a></span>function FrameworkZ.Players:GetPlayerByID(username)</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    if not username then return false end</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno"><a class="line" href="Players_8lua.html#a885282ba83209c508e2075cc261802b0">  266</a></span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    local player = self.List[username]</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    if player then</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        return player</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    end</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    return false</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>end</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>function FrameworkZ.Players:GetCharacterByID(username, characterID)</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    if not username or not characterID then return false end</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    local player = self:GetPlayerByID(username)</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    if player then</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno"><a class="line" href="Players_8lua.html#aca5e237ae1622841b6845d7afdc57473">  282</a></span>        local character = player.characters[characterID]</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno"><a class="line" href="Players_8lua.html#a18717baae88ac22a1497723fd13d7b03">  284</a></span>        if character then</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            return character</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        end</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    end</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    return false</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>end</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>--! \brief Gets saved character data by their ID.</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>--! \param username \string The username of the player.</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>--! \param characterID \integer The ID of the character.</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>--! \return \table or \boolean The character data or false if the data failed to be retrieved.</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>function FrameworkZ.Players:GetCharacterDataByID(username, characterID)</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    if not username or not characterID then return false end</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    local player = FrameworkZ.Players:GetPlayerByID(username)</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    if player then</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        local character = player.characters[characterID]</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        if character then</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>            return character</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        end</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    end</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    return false</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>end</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>function FrameworkZ.Players:ResetCharacterSaveInterval()</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    if FrameworkZ.Timers:Exists(&quot;FZ_CharacterSaveInterval&quot;) then</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        FrameworkZ.Timers:Start(&quot;FZ_CharacterSaveInterval&quot;)</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    end</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>end</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>function FrameworkZ.Players:CreateCharacter(username, data)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    if not username or not data then return false end</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span> </div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    local player = self:GetPlayerByID(username)</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    if player and player.characters then</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        FrameworkZ.Players:ResetCharacterSaveInterval()</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        data.META_ID = #player.characters + 1</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        data.META_FIRST_LOAD = true</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        table.insert(player.characters, data)</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        player:GetStoredData().characters = player.characters</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        if isClient() then</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            player.isoPlayer:transmitModData()</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        end</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>        return true, #player.characters</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    end</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    return false</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>end</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span> </div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>--! \brief Saves the player and their currently loaded character.</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>--! \param username \string The username of the player.</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>--! \param continueOnFailure \boolean (Optional) Whether or not to continue saving either the player or character if either should fail. Default = false. True not recommended.</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>--! \return \boolean Whether or not the player was successfully saved.</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>--! \return \string The failure message if the player or character failed to save.</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>function FrameworkZ.Players:Save(username, continueOnFailure)</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    if continueOnFailure == nil then continueOnFailure = false end</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    local player = FrameworkZ.Players:GetPlayerByID(username)</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    if not player then return false end</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    local saved = false</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    local failureMessage = &quot;&quot;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    local character = player.loadedCharacter</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    local characterSaved = false</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    local playerSaved = player:Save(false)</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    saved = playerSaved</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    if not saved and not continueOnFailure then</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        return false, &quot;Failed to save player data.&quot;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    elseif not saved and continueOnFailure then</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        failureMessage = &quot;Failed to save player data.&quot;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    end</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    if character then</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        characterSaved = character:Save(false)</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        saved = characterSaved</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        if not saved and not continueOnFailure then</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            return false, &quot;Failed to save character data.&quot;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        elseif not saved and continueOnFailure then</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            failureMessage = failureMessage == &quot;Failed to save player data.&quot; and &quot;Failed to save both player data and character data.&quot; or &quot;Player data saved, but failed to save character data.&quot;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        end</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    else</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        characterSaved = true -- No character loaded, set true to prevent returning false.</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    end</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    if isClient() then</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        player.isoPlayer:transmitModData()</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    end</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    if playerSaved and characterSaved then</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        saved = true</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    else</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        saved = false</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    end</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    return saved, failureMessage</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>end</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>function FrameworkZ.Players:Destroy(username)</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    local properlyDestroyed = false</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    local message = &quot;Failed to destroy player.&quot;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    local player = self:GetPlayerByID(username)</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    if player then</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        properlyDestroyed, message = player:Destroy()</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    end</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    return properlyDestroyed, message</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>end</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>function FrameworkZ.Players:SaveCharacter(username, character)</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    local player = FrameworkZ.Players:GetPlayerByID(username)</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    if not player or not character then return false end</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    local isoPlayer = player.isoPlayer</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    character.INVENTORY_PHYSICAL = {}</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    local inventory = isoPlayer:getInventory():getItems()</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    for i = 0, inventory:size() - 1 do</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        table.insert(character.INVENTORY_PHYSICAL, {id = inventory:get(i):getFullType()})</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    end</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    character.INVENTORY_LOGICAL = FrameworkZ.Characters:GetCharacterInventoryByID(username).items</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    character.EQUIPMENT_SLOT_HEAD = isoPlayer:getWornItem(EQUIPMENT_SLOT_HEAD) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_HEAD):getFullType()} or nil</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    character.EQUIPMENT_SLOT_FACE = isoPlayer:getWornItem(EQUIPMENT_SLOT_FACE) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_FACE):getFullType()} or nil</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    character.EQUIPMENT_SLOT_EARS = isoPlayer:getWornItem(EQUIPMENT_SLOT_EARS) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_EARS):getFullType()} or nil</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    character.EQUIPMENT_SLOT_BACKPACK = isoPlayer:getWornItem(EQUIPMENT_SLOT_BACKPACK) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_BACKPACK):getFullType()} or nil</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    character.EQUIPMENT_SLOT_GLOVES = isoPlayer:getWornItem(EQUIPMENT_SLOT_GLOVES) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_GLOVES):getFullType()} or nil</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    character.EQUIPMENT_SLOT_UNDERSHIRT = isoPlayer:getWornItem(EQUIPMENT_SLOT_UNDERSHIRT) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_UNDERSHIRT):getFullType()} or nil</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    character.EQUIPMENT_SLOT_OVERSHIRT = isoPlayer:getWornItem(EQUIPMENT_SLOT_OVERSHIRT) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_OVERSHIRT):getFullType()} or nil</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    character.EQUIPMENT_SLOT_VEST = isoPlayer:getWornItem(EQUIPMENT_SLOT_VEST) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_VEST):getFullType()} or nil</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    character.EQUIPMENT_SLOT_BELT = isoPlayer:getWornItem(EQUIPMENT_SLOT_BELT) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_BELT):getFullType()} or nil</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    character.EQUIPMENT_SLOT_PANTS = isoPlayer:getWornItem(EQUIPMENT_SLOT_PANTS) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_PANTS):getFullType()} or nil</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    character.EQUIPMENT_SLOT_SOCKS = isoPlayer:getWornItem(EQUIPMENT_SLOT_SOCKS) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_SOCKS):getFullType()} or nil</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    character.EQUIPMENT_SLOT_SHOES = isoPlayer:getWornItem(EQUIPMENT_SLOT_SHOES) and {id = isoPlayer:getWornItem(EQUIPMENT_SLOT_SHOES):getFullType()} or nil</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    -- Save character position/direction angle</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    character.POSITION_X = isoPlayer:getX()</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    character.POSITION_Y = isoPlayer:getY()</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    character.POSITION_Z = isoPlayer:getZ()</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    character.DIRECTION_ANGLE = isoPlayer:getDirectionAngle()</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    local getStats = isoPlayer:getStats()</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    character.STAT_HUNGER = getStats:getHunger()</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    character.STAT_THIRST = getStats:getThirst()</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    character.STAT_FATIGUE = getStats:getFatigue()</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    character.STAT_STRESS = getStats:getStress()</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    character.STAT_PAIN = getStats:getPain()</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    character.STAT_PANIC = getStats:getPanic()</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    character.STAT_BOREDOM = getStats:getBoredom()</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    --character.STAT_UNHAPPINESS = getStats:getUnhappyness()</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    character.STAT_DRUNKENNESS = getStats:getDrunkenness()</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    character.STAT_ENDURANCE = getStats:getEndurance()</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    --character.STAT_TIREDNESS = getStats:getTiredness()</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span> </div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    --[[</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    modData.status.health = character:getBodyDamage():getOverallBodyHealth()</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    modData.status.injuries = character:getBodyDamage():getInjurySeverity()</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    modData.status.hyperthermia = character:getBodyDamage():getTemperature()</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    modData.status.hypothermia = character:getBodyDamage():getColdStrength()</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    modData.status.wetness = character:getBodyDamage():getWetness()</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    modData.status.hasCold = character:getBodyDamage():HasACold()</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    modData.status.sick = character:getBodyDamage():getSicknessLevel()</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    --]]</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    if isClient() then</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        isoPlayer:transmitModData()</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    end</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span> </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    return true</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>end</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>function FrameworkZ.Players:SaveCharacterByID(username, characterID)</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>end</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>--[[</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    Steps:</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        1. Load equipment/items</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        2. Teleport</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        3. Ungod</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        4. Apply damage/wounds/moodles (if applicable)</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        5. Make visible</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        6. Unmute</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        7. Save</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        8. Post load</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>        9. Return true</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>--]]</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>function FrameworkZ.Players:LoadCharacter(username, characterData, survivorDescriptor)</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    local player = FrameworkZ.Players:GetPlayerByID(username)</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    if not player or not characterData then return false end</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    local isoPlayer = player.isoPlayer</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    if characterData.META_FIRST_LOAD == true then</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        isoPlayer:setX(FrameworkZ.Config.SpawnX)</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>        isoPlayer:setY(FrameworkZ.Config.SpawnY)</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        isoPlayer:setZ(FrameworkZ.Config.SpawnZ)</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        isoPlayer:setLx(FrameworkZ.Config.SpawnX)</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        isoPlayer:setLy(FrameworkZ.Config.SpawnY)</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        isoPlayer:setLz(FrameworkZ.Config.SpawnZ)</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    else</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        isoPlayer:setX(characterData.POSITION_X)</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        isoPlayer:setY(characterData.POSITION_Y)</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        isoPlayer:setZ(characterData.POSITION_Z)</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        isoPlayer:setLx(characterData.POSITION_X)</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        isoPlayer:setLy(characterData.POSITION_Y)</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        isoPlayer:setLz(characterData.POSITION_Z)</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        isoPlayer:setDirectionAngle(characterData.DIRECTION_ANGLE)</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    end</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    isoPlayer:clearWornItems()</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    isoPlayer:getInventory():clear()</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    for k, v in pairs(characterData) do</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        if string.match(k, &quot;EQUIPMENT_SLOT_&quot;) then</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            if v and v.id then</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>                local item = isoPlayer:getInventory():AddItem(v.id)</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>                isoPlayer:setWornItem(item:getBodyLocation(), item)</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>            end</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        end</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    end</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    local isFemale = survivorDescriptor:isFemale()</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    isoPlayer:setFemale(isFemale)</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    isoPlayer:getDescriptor():setFemale(isFemale)</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    isoPlayer:getHumanVisual():clear()</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    isoPlayer:getHumanVisual():copyFrom(survivorDescriptor:getHumanVisual())</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    isoPlayer:resetModel()</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span> </div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    isoPlayer:setGodMod(false)</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    isoPlayer:setInvincible(false)</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    -- Apply damage/wounds/moodles</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    isoPlayer:setInvisible(false)</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    isoPlayer:setGhostMode(false)</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    isoPlayer:setNoClip(false)</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    if VoiceManager:playerGetMute(username) then</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        VoiceManager:playerSetMute(username)</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    end</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span> </div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    local postLoadSuccessful, character = FrameworkZ.Characters:PostLoad(isoPlayer, characterData)</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    if not postLoadSuccessful or not character then return false end</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    player.loadedCharacter = character</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    character:OnPostLoad(characterData.META_FIRST_LOAD)</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    if characterData.META_FIRST_LOAD then</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        characterData.META_FIRST_LOAD = false</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    end</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    if not self:SaveCharacter(username, characterData) then return false end</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span> </div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    return true</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>end</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>function FrameworkZ.Players:LoadCharacterByID(username, characterID)</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>end</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>function FrameworkZ.Players:DeleteCharacter(username, character)</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>end</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>function FrameworkZ.Players:DeleteCharacterByID(username, characterID)</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>end</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>function FrameworkZ.Players:InitializeClient(isoPlayer)</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    local player = FrameworkZ.Players:New(isoPlayer)</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span> </div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    if player then</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        player:Initialize()</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    end</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>end</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>if not isClient() then</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    function FrameworkZ.Players.OnClientCommand(module, command, isoPlayer, args)</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        if module == &quot;FZ_PLY&quot; then</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            if command == &quot;initialize&quot; then</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                local player = FrameworkZ.Players:New(isoPlayer)</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>                if player then</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>                    player:Initialize()</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>                end</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            elseif command == &quot;remove_limbo_protection&quot; then</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>                isoPlayer:setGodMod(false)</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>                isoPlayer:setInvincible(false)</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>                isoPlayer:setInvisible(false)</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                isoPlayer:setGhostMode(false)</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                isoPlayer:setNoClip(false)</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                sendPlayerExtraInfo(isoPlayer)</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            elseif command == &quot;on_first_load&quot; then</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                isoPlayer:setX(FrameworkZ.Config.SpawnX)</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>                isoPlayer:setY(FrameworkZ.Config.SpawnY)</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>                isoPlayer:setZ(FrameworkZ.Config.SpawnZ)</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                isoPlayer:setLx(FrameworkZ.Config.SpawnX)</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                isoPlayer:setLy(FrameworkZ.Config.SpawnY)</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                isoPlayer:setLz(FrameworkZ.Config.SpawnZ)</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            elseif command == &quot;destroy&quot; then</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>                local username = args[1]</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                local player = FrameworkZ.Players:GetPlayerByID(username)</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span> </div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>                if player then</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>                    player:Destroy()</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                end</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                FrameworkZ.Characters.List[username] = nil</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>            elseif command == &quot;update&quot; then</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>                local username = args[1]</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                local field = args[2]</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>                local newData = args[3]</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>                FrameworkZ.Players.List[username][field] = newData</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            end</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>        end</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    end</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    Events.OnClientCommand.Add(FrameworkZ.Players.OnClientCommand)</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>end</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span> </div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>FrameworkZ.Foundation:RegisterModule(FrameworkZ.Players)</div>
<div class="ttc" id="a2000__Foundation_8lua_html_a40f3b7ae9f59a05c90bdc4ab95bfd5c5"><div class="ttname"><a href="2000__Foundation_8lua.html#a40f3b7ae9f59a05c90bdc4ab95bfd5c5">module</a></div><div class="ttdeci">void module()</div></div>
<div class="ttc" id="aCharacters_8lua_html_a9bd4269253e242c8457d1adc06680c33"><div class="ttname"><a href="Characters_8lua.html#a9bd4269253e242c8457d1adc06680c33">player</a></div><div class="ttdeci">void player</div><div class="ttdef"><b>Definition</b> <a href="Characters_8lua_source.html#l00328">Characters.lua:328</a></div></div>
<div class="ttc" id="aCharacters_8lua_html_ae53f03a4dff85d801d625e117b17eb15"><div class="ttname"><a href="Characters_8lua.html#ae53f03a4dff85d801d625e117b17eb15">isoPlayer</a></div><div class="ttdeci">void self isoPlayer</div><div class="ttdef"><b>Definition</b> <a href="Characters_8lua_source.html#l00232">Characters.lua:232</a></div></div>
<div class="ttc" id="aMainMenu_8lua_html_a5dc4bcb99e3c5347b6b7e5d7216536be"><div class="ttname"><a href="MainMenu_8lua.html#a5dc4bcb99e3c5347b6b7e5d7216536be">self</a></div><div class="ttdeci">void self self</div><div class="ttdef"><b>Definition</b> <a href="MainMenu_8lua_source.html#l00085">MainMenu.lua:85</a></div></div>
<div class="ttc" id="aPlayers_8lua_html_a18717baae88ac22a1497723fd13d7b03"><div class="ttname"><a href="Players_8lua.html#a18717baae88ac22a1497723fd13d7b03">newData</a></div><div class="ttdeci">void local newData()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a1f76fd99cafe6abeec9923bc534366ba"><div class="ttname"><a href="Players_8lua.html#a1f76fd99cafe6abeec9923bc534366ba">characterSaved</a></div><div class="ttdeci">void characterSaved()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a494be6674b52d745cb08dd6ab6869e43"><div class="ttname"><a href="Players_8lua.html#a494be6674b52d745cb08dd6ab6869e43">getStats</a></div><div class="ttdeci">void local getStats()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a4e6b906134a99597f8990ec4f4493a7a"><div class="ttname"><a href="Players_8lua.html#a4e6b906134a99597f8990ec4f4493a7a">getPlayer</a></div><div class="ttdeci">void local getPlayer()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a55437a84141ed35fd5bf5699e26ff643"><div class="ttname"><a href="Players_8lua.html#a55437a84141ed35fd5bf5699e26ff643">username</a></div><div class="ttdeci">void self username()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a569caa4b8db4ab89682bcc083244c01e"><div class="ttname"><a href="Players_8lua.html#a569caa4b8db4ab89682bcc083244c01e">item</a></div><div class="ttdeci">void local item()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a57f57c6afe52832e32953be262f94925"><div class="ttname"><a href="Players_8lua.html#a57f57c6afe52832e32953be262f94925">character</a></div><div class="ttdeci">void local character()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a61f337d4777878cf50bea6b1a529512b"><div class="ttname"><a href="Players_8lua.html#a61f337d4777878cf50bea6b1a529512b">isClient</a></div><div class="ttdeci">void local isClient()</div></div>
<div class="ttc" id="aPlayers_8lua_html_a6ca9be182bd7b3c22aacb8e2a9f0a1af"><div class="ttname"><a href="Players_8lua.html#a6ca9be182bd7b3c22aacb8e2a9f0a1af">player</a></div><div class="ttdeci">void local player()</div><div class="ttdef"><b>Definition</b> <a href="Characters_8lua_source.html#l00328">Characters.lua:328</a></div></div>
<div class="ttc" id="aPlayers_8lua_html_a885282ba83209c508e2075cc261802b0"><div class="ttname"><a href="Players_8lua.html#a885282ba83209c508e2075cc261802b0">command</a></div><div class="ttdeci">void elseif command()</div></div>
<div class="ttc" id="aPlayers_8lua_html_aca5e237ae1622841b6845d7afdc57473"><div class="ttname"><a href="Players_8lua.html#aca5e237ae1622841b6845d7afdc57473">field</a></div><div class="ttdeci">void local field()</div></div>
<div class="ttc" id="aPlayers_8lua_html_acc7f1bf7fac7bbd0d2fc3f0c039e02bc"><div class="ttname"><a href="Players_8lua.html#acc7f1bf7fac7bbd0d2fc3f0c039e02bc">saved</a></div><div class="ttdeci">void saved()</div></div>
<div class="ttc" id="aPlayers_8lua_html_ace3597a98f56ec4ea5222579eabdc5a2"><div class="ttname"><a href="Players_8lua.html#ace3597a98f56ec4ea5222579eabdc5a2">initializedNewData</a></div><div class="ttdeci">void initializedNewData()</div></div>
<div class="ttc" id="aPlayers_8lua_html_ae051a2d99484f13c481e8f7e5e3602ca"><div class="ttname"><a href="Players_8lua.html#ae051a2d99484f13c481e8f7e5e3602ca">failureMessage</a></div><div class="ttdeci">void failureMessage()</div></div>
<div class="ttc" id="aPlayers_8lua_html_ae2d5391c7b8ae4d02ed6a57cee64c472"><div class="ttname"><a href="Players_8lua.html#ae2d5391c7b8ae4d02ed6a57cee64c472">postLoadSuccessful</a></div><div class="ttdeci">void local postLoadSuccessful</div><div class="ttdef"><b>Definition</b> <a href="#l00260">Players.lua:260</a></div></div>
<div class="ttc" id="aPlayers_8lua_html_aee2feef3a9bf39c271149d301c9bd2d9"><div class="ttname"><a href="Players_8lua.html#aee2feef3a9bf39c271149d301c9bd2d9">isFemale</a></div><div class="ttdeci">void local isFemale()</div></div>
<div class="ttc" id="aPlayers_8lua_html_afa527a043ae080282ba8416ad32d073d"><div class="ttname"><a href="Players_8lua.html#afa527a043ae080282ba8416ad32d073d">FrameworkZ</a></div><div class="ttdeci">void FrameworkZ()</div></div>
<div class="ttc" id="astructFrameworkZ_1_1Characters_html"><div class="ttname"><a href="structFrameworkZ_1_1Characters.html">FrameworkZ::Characters</a></div><div class="ttdoc">Characters module for FrameworkZ. Defines and interacts with CHARACTER object.</div><div class="ttdef"><b>Definition</b> <a href="Characters_8lua_source.html#l00102">Characters.lua:102</a></div></div>
<div class="ttc" id="astructFrameworkZ_1_1Characters_html_aa03ceb7ca54f2644c4acef3c6ec61719"><div class="ttname"><a href="structFrameworkZ_1_1Characters.html#aa03ceb7ca54f2644c4acef3c6ec61719">FrameworkZ::Characters::List</a></div><div class="ttdeci">FrameworkZ Characters List</div><div class="ttdef"><b>Definition</b> <a href="Characters_8lua_source.html#l00179">Characters.lua:179</a></div></div>
<div class="ttc" id="astructFrameworkZ_1_1Players_html"><div class="ttname"><a href="structFrameworkZ_1_1Players.html">FrameworkZ::Players</a></div><div class="ttdoc">Players module for FrameworkZ. Defines and interacts with PLAYER object.</div><div class="ttdef"><b>Definition</b> <a href="#l00058">Players.lua:58</a></div></div>
<div class="ttc" id="astructFrameworkZ_1_1Players_html_a62818e2fe470fb48f99162aa94e1e40a"><div class="ttname"><a href="structFrameworkZ_1_1Players.html#a62818e2fe470fb48f99162aa94e1e40a">FrameworkZ::Players::Roles</a></div><div class="ttdeci">FrameworkZ Players Roles</div><div class="ttdoc">Roles for players in FrameworkZ.</div><div class="ttdef"><b>Definition</b> <a href="#l00068">Players.lua:68</a></div></div>
<div class="ttc" id="astructFrameworkZ_1_1Players_html_aa6ce3416c94ace8f6fb5c9fe756445a2"><div class="ttname"><a href="structFrameworkZ_1_1Players.html#aa6ce3416c94ace8f6fb5c9fe756445a2">FrameworkZ::Players::List</a></div><div class="ttdeci">FrameworkZ Players List</div><div class="ttdoc">List of all instanced players in the game.</div><div class="ttdef"><b>Definition</b> <a href="#l00063">Players.lua:63</a></div></div>
<div class="ttc" id="astructFrameworkZ_html"><div class="ttname"><a href="structFrameworkZ.html">FrameworkZ</a></div><div class="ttdoc">FrameworkZ global table.</div><div class="ttdef"><b>Definition</b> <a href="2000__Foundation_8lua_source.html#l00071">2000_Foundation.lua:71</a></div></div>
<div class="ttc" id="astructPLAYER_html"><div class="ttname"><a href="structPLAYER.html">PLAYER</a></div><div class="ttdoc">Player class for FrameworkZ.</div><div class="ttdef"><b>Definition</b> <a href="#l00013">Players.lua:13</a></div></div>
<div class="ttc" id="astructPLAYER_html_a26629e72d131457d966ea74dc18225f0"><div class="ttname"><a href="structPLAYER.html#a26629e72d131457d966ea74dc18225f0">PLAYER::InitializeDefaultFactionWhitelists</a></div><div class="ttdeci">void InitializeDefaultFactionWhitelists()</div></div>
<div class="ttc" id="astructPLAYER_html_a3a6a636a703dcd9bfec208bb0a31ef82"><div class="ttname"><a href="structPLAYER.html#a3a6a636a703dcd9bfec208bb0a31ef82">PLAYER::Save</a></div><div class="ttdeci">boolean Save(shouldTransmit)</div><div class="ttdoc">Saves the player's data.</div></div>
<div class="ttc" id="astructPLAYER_html_a3ab7fbb543f48e64645c5e07d4e7398f"><div class="ttname"><a href="structPLAYER.html#a3ab7fbb543f48e64645c5e07d4e7398f">PLAYER::StopSound</a></div><div class="ttdeci">void StopSound(soundNameOrID)</div><div class="ttdoc">Stops a sound for the player.</div></div>
<div class="ttc" id="astructPLAYER_html_a456434651d03493f358d7d7b4ea59477"><div class="ttname"><a href="structPLAYER.html#a456434651d03493f358d7d7b4ea59477">PLAYER::GetWhitelists</a></div><div class="ttdeci">void GetWhitelists()</div></div>
<div class="ttc" id="astructPLAYER_html_a4ede2ac2ff4a70420da46932ea34ae62"><div class="ttname"><a href="structPLAYER.html#a4ede2ac2ff4a70420da46932ea34ae62">PLAYER::__index</a></div><div class="ttdeci">PLAYER __index</div><div class="ttdef"><b>Definition</b> <a href="#l00015">Players.lua:15</a></div></div>
<div class="ttc" id="astructPLAYER_html_a6f850a0a06f5333ea273d507c7ca6a66"><div class="ttname"><a href="structPLAYER.html#a6f850a0a06f5333ea273d507c7ca6a66">PLAYER::Destroy</a></div><div class="ttdeci">mixed Destroy()</div><div class="ttdoc">Destroys the player object.</div></div>
<div class="ttc" id="astructPLAYER_html_a83f58e83d6d53b741015e170ce0773d5"><div class="ttname"><a href="structPLAYER.html#a83f58e83d6d53b741015e170ce0773d5">PLAYER::PlayLocalSound</a></div><div class="ttdeci">integer PlayLocalSound(soundName)</div><div class="ttdoc">Plays a sound for the player that only they can hear.</div></div>
<div class="ttc" id="astructPLAYER_html_ab164002c581e4ce52fae5992f4512a61"><div class="ttname"><a href="structPLAYER.html#ab164002c581e4ce52fae5992f4512a61">PLAYER::GetStoredData</a></div><div class="ttdeci">table GetStoredData()</div><div class="ttdoc">Gets the stored player mod data table. Used internally. Do not use this unless you know what you are ...</div></div>
<div class="ttc" id="astructPLAYER_html_adb708be7b43b8a916178de71bb61e0a4"><div class="ttname"><a href="structPLAYER.html#adb708be7b43b8a916178de71bb61e0a4">PLAYER::Initialize</a></div><div class="ttdeci">string Initialize()</div><div class="ttdoc">Initializes the player object.</div></div>
<div class="ttc" id="astructPLAYER_html_ae36c340c2b2e8696679e0601c1ea85ed"><div class="ttname"><a href="structPLAYER.html#ae36c340c2b2e8696679e0601c1ea85ed">PLAYER::SetWhitelisted</a></div><div class="ttdeci">void SetWhitelisted(factionID, whitelisted)</div></div>
<div class="ttc" id="astructPLAYER_html_ae3b603fd5cc2cf0ab9236994b8d0288c"><div class="ttname"><a href="structPLAYER.html#ae3b603fd5cc2cf0ab9236994b8d0288c">PLAYER::ValidatePlayerData</a></div><div class="ttdeci">void ValidatePlayerData()</div></div>
<div class="ttc" id="astructPLAYER_html_aeb190b74be7183423f2790ffb761d73b"><div class="ttname"><a href="structPLAYER.html#aeb190b74be7183423f2790ffb761d73b">PLAYER::IsWhitelisted</a></div><div class="ttdeci">void IsWhitelisted(factionID)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e32e21dff86b2f4c3e9cf44f437b74cb.html">mods</a></li><li class="navelem"><a class="el" href="dir_12cfd7a7d4d1f07a507c928db6b75ede.html">FrameworkZ</a></li><li class="navelem"><a class="el" href="dir_2026b7b8f5ed5518b80e944fd97fe622.html">media</a></li><li class="navelem"><a class="el" href="dir_277b3d2a68c312a509d73adac66c538a.html">lua</a></li><li class="navelem"><a class="el" href="dir_81bd98d45aa5d256708bad1fc9520775.html">shared</a></li><li class="navelem"><a class="el" href="dir_9224d4afa0916f680839eb436935d6c1.html">_FrameworkZ</a></li><li class="navelem"><a class="el" href="dir_190e24bfc7bdbe1ba041a985ef87832e.html">2000_modules</a></li><li class="navelem"><a class="el" href="Players_8lua.html">Players.lua</a></li>
    <li class="footer">Generated on Sun Dec 22 2024 15:36:40 for FrameworkZ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
